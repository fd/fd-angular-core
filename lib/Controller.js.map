{"version":3,"sources":["../src/Controller.js"],"names":[],"mappings":";;;;;QAGgB,UAAU,GAAV,UAAU;;qBAHH,SAAS;;mBACd,OAAO;;AAElB,SAAS,UAAU,CAAC,IAAI,EAAE,OAAO,EAAE;AACxC,MAAI,OAAO,IAAI,KAAK,UAAU,EAAE;AAC9B,QAAI,YAAW,GAAG,IAAI,CAAC,AAAC,IAAI,GAAG,IAAI,CAAC;AACpC,WAAO,QAAQ,CAAC,YAAW,EAAE,OAAO,CAAC,CAAC;GACvC;;AAED,SAAO,QAAQ,CAAC;AAChB,WAAS,QAAQ,CAAC,WAAW,EAAE,IAAI,EAAC;AAClC,gBAAY,CAAC,WAAW,CAAC,CAAC;AAC1B,QAAI,IAAI,GAAG,WAZP,QAAQ,EAYQ,WAAW,CAAC,CAAC;;AAEjC,QAAI,GAAI,IAAI,IAAK,IAAI,IAAI,IAAI,CAAC,IAAI,AAAC,IAAI,IAAI,CAAC,IAAI,AAAC,CAAC;AAClD,QAAI,CAAC,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC;;AAE5B,SAhBI,GAAG,CAgBH,UAAU,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;GACnC;CACF;;AAED,SAAS,YAAY,CAAC,WAAW,EAAE;AACjC,MAAI,IAAI,GAAG,WAtBL,QAAQ,EAsBM,WAAW,CAAC,CAAC;AACjC,MAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC;;AAE3B,MAAI,IAAI,EAAE;AACR,UAAM,sCAAsC,CAAC;GAC9C;;AAED,MAAI,CAAC,UAAU,GAAG,EAAE,CAAC;CACtB","file":"Controller.js","sourcesContent":["import {funcMeta} from \"./utils\";\nimport {app} from \"./app\";\n\nexport function Controller(name, options) {\n  if (typeof name === \"function\") {\n    let constructor = name; name = null;\n    return register(constructor, options);\n  }\n\n  return register;\n  function register(constructor, opts){\n    registerLock(constructor);\n    let meta = funcMeta(constructor);\n\n    name = (name || (opts && opts.name) || meta.name);\n    meta.controller.name = name;\n\n    app.controller(name, constructor);\n  }\n}\n\nfunction registerLock(constructor) {\n  let meta = funcMeta(constructor);\n  var lock = meta.controller;\n\n  if (lock) {\n    throw \"@Controller() can only be used once!\";\n  }\n\n  meta.controller = {};\n}\n"]}