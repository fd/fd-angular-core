{"version":3,"sources":["../src/app.js"],"names":[],"mappings":";;;;;;;;;;;;sBACc,QAAQ;;;;uBACF,SAAS;;;;wBACA,YAAY;;sBACnB,SAAS;;;;QAGxB,mBAAmB;;qBAE8B,SAAS;;;;;AAKjE,IAAI,YAAY,GAAG,IAAI,CAAC;AACxB,IAAI,OAAO,GAAG,CAAC,WAAW,CAAC,CAAC;AACrB,IAAI,GAAG,GAAG,qBAAQ,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;;;AAEhD,GAAG,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,UAAS,SAAS,EAAE;AACzC,+BAAe,SAAS,CAAC,CAAC;CAC1B,CAAC,CAAC,CAAC;;AAEJ,GAAG,CAAC,MAAM,CAAC,CAAC,gBAAgB,EAAE,UAAS,cAAc,EAAE;AACtD,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAC,EAAE;AAClD,kBAAQ,IAAI,CAAC,wBAAwB,CAAC,CAAC;EACvC;;AAED,KAAI,YAAY,EAAE;AACjB,MAAI,KAAK,GAAG,+BAAmB,YAAY,CAAC,CAAC;AAC7C,MAAI,MAAM,GAAG,kCAAsB,KAAK,CAAC,CAAC;;;;;;AAC1C,wBAAc,MAAM,8HAAE;QAAb,CAAC;;AACT,kBAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IACxB;;;;;;;;;;;;;;;EACD;CACD,CAAC,CAAC,CAAC;;;;;;;AAMG,SAAS,aAAa,CAAC,IAAI,EAAE;AACnC,QAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;CACnB;;;;;AAKM,IAAI,EAAE,uBAAU,CAAC;;AACxB,IAAI,mBAAmB,GAAG,SAAS,CAAC;AACpC,IAAI,iBAAiB,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAK;AAAE,oBAAmB,GAAG,OAAO,CAAC;CAAE,CAAC,CAAC;;;;;;;AAM9E,SAAS,UAAU,CAAC,IAAI,EAAE;AAChC,kBAAiB,GAAG,iBAAiB,CAAC,IAAI,CAAC;SAAM,IAAI,EAAE;EAAA,CAAC,CAAC;CACzD;;;;;;;;;AAQM,SAAS,SAAS,CAAC,SAAS,EAAW;AAC7C,aAAY,GAAG,SAAS,CAAC;;;;;;oCADc,IAAI;AAAJ,OAAI;;;AAE3C,wBAAgB,IAAI,mIAAE;OAAb,GAAG;;AACX,gBAAa,CAAC,GAAG,CAAC,CAAC;GACnB;;;;;;;;;;;;;;;;AAED,oBAAmB,EAAE,CAAC;AACtB,QAAO,iBAAiB,CAAC,IAAI,CAAC,YAAW;AACxC,SAAO,IAAI,OAAO,CAAC,UAAS,OAAO,EAAE,MAAM,EAAC;AAC3C,4BAAE,YAAM;AACP,QAAI;AACH,SAAI,QAAQ,GAAG,qBAAQ,SAAS,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;AACpD,mCAAe,QAAQ,CAAC,CAAC;AACzB,YAAO,EAAE,CAAC;KACV,CAAC,OAAM,CAAC,EAAE;AACV,WAAM,CAAC,CAAC,CAAC,CAAC;KACV;IACD,CAAC,CAAC;GACH,CAAC,CAAC;EACH,CAAC,CAAC;CACH","file":"app.js","sourcesContent":["/* */\nimport $ from 'jquery';\nimport angular from 'angular';\nimport {extendInjector} from './injector';\nimport {console} from 'mr-util';\n\n// Base modules\nimport 'angular-ui-router';\n\nimport {buildUiRouterState, flattenUiRouterStates} from './State';\n\n/**\n@var {ngModule} app\n*/\nlet appRootState = null;\nlet appDeps = ['ui.router'];\nexport var app = angular.module('app', appDeps);\n\napp.run(['$injector', function($injector) {\n\textendInjector($injector);\n}]);\n\napp.config(['$stateProvider', function($stateProvider) {\n\tif (!document.querySelector('[ui-view], ui-view')) {\n\t\tconsole.warn('No root ui-view found!');\n\t}\n\n\tif (appRootState) {\n\t\tlet state = buildUiRouterState(appRootState);\n\t\tlet states = flattenUiRouterStates(state);\n\t\tfor (let s of states) {\n\t\t\t$stateProvider.state(s);\n\t\t}\n\t}\n}]);\n\n/**\n@function includeModule\n@param {String} name - name of the module to include.\n*/\nexport function includeModule(name) {\n\tappDeps.push(name);\n}\n\n/**\n@var {angular} ng\n*/\nexport var ng = angular;\nvar beforeBootPromiseGo = undefined;\nvar beforeBootPromise = new Promise((resolve) => { beforeBootPromiseGo = resolve; });\n\n/**\n@function beforeBoot\n@param {Promise} p - includes a Promise before the app is booted.\n*/\nexport function beforeBoot(func) {\n\tbeforeBootPromise = beforeBootPromise.then(() => func());\n}\n\n/**\n@function bootstrap\n@param {State} mainState\n@param {...Sgtring} deps\n@return {Promise}\n*/\nexport function bootstrap(mainState, ...deps) {\n\tappRootState = mainState;\n\tfor (let dep of deps) {\n\t\tincludeModule(dep);\n\t}\n\n\tbeforeBootPromiseGo();\n\treturn beforeBootPromise.then(function() {\n\t\treturn new Promise(function(resolve, reject){\n\t\t\t$(() => {\n\t\t\t\ttry {\n\t\t\t\t\tlet injector = angular.bootstrap(document, ['app']);\n\t\t\t\t\textendInjector(injector);\n\t\t\t\t\tresolve();\n\t\t\t\t} catch(e) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n}\n"]}