{"version":3,"sources":["../src/utils.js"],"names":[],"mappings":"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","file":"utils.js","sourcesContent":["import {app} from './app';\n\nexport function dashCase(str) {\n  return str.replace(/([A-Z])/g, function ($1) {\n    return \"-\" + $1.toLowerCase();\n  });\n}\n\nexport function funcName(func) {\n  return funcMeta(func).name;\n}\n\nexport function superClass(func) {\n  return funcMeta(func).superClass;\n}\n\nexport function funcMeta(func) {\n  if (func.$meta !== undefined) {\n    return func.$meta;\n  }\n\n  let meta = {\n    controller: null,\n    service:    null,\n    state:      null,\n    wrappers:   null,\n    base:       func,\n    top:        func,\n    name:       getName(),\n    superClass: getSuperClass(),\n  };\n\n  func.$meta = meta;\n\n  return meta;\n\n  function getName() {\n    let name = ((func && func.name) || null);\n    if (name === null) {\n      name = func.toString().match(/^function\\s*([^\\s(]+)/)[1];\n    }\n    return name;\n  }\n\n  function getSuperClass() {\n    if (!func) { return null; }\n    if (!func.prototype) { return null; }\n    if (!Object.getPrototypeOf(func.prototype)) { return null; }\n    return Object.getPrototypeOf(func.prototype).constructor || null;\n  }\n}\n\nexport function wrapFunc(func, wrapperFunc) {\n  let meta = funcMeta(func);\n\n  meta.top = wrapperFunc;\n  if (!meta.wrappers) {\n    meta.wrappers = [wrapperFunc];\n  } else {\n    meta.wrappers.unshift(wrapperFunc);\n  }\n\n  wrapperFunc.$meta = meta;\n\n  // inherit $inject\n  if (func.$inject) {\n    wrapperFunc.$inject = func.$inject.slice();\n  }\n\n  if (meta.controller) {\n    // re-register controller\n    app.controller(meta.controller.name, meta.top);\n  }\n\n  if (meta.service) {\n    // re-register service\n    app.service(meta.service.name, meta.top);\n  }\n\n  return wrapperFunc;\n}\n"]}