{"version":3,"sources":["../src/Service.js"],"names":[],"mappings":";;;;;QAGgB,OAAO,GAAP,OAAO;;qBAHA,SAAS;;mBACd,OAAO;;AAElB,SAAS,OAAO,CAAC,IAAI,EAAE;AAC5B,MAAI,OAAO,IAAI,KAAK,UAAU,EAAE;AAC9B,QAAI,YAAW,GAAG,IAAI,CAAC,AAAC,IAAI,GAAG,IAAI,CAAC;AACpC,WAAO,QAAQ,CAAC,YAAW,CAAC,CAAC;GAC9B;AACD,SAAO,QAAQ,CAAC;;AAEhB,WAAS,QAAQ,CAAC,WAAW,EAAC;AAC5B,gBAAY,CAAC,WAAW,CAAC,CAAC;AAC1B,QAAI,IAAI,GAAG,WAZP,QAAQ,EAYQ,WAAW,CAAC,CAAC;;AAEjC,QAAI,GAAI,IAAI,IAAI,IAAI,CAAC,IAAI,AAAC,CAAC;AAC3B,QAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;;AAEzB,SAhBI,GAAG,CAgBH,OAAO,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;GAChC;CACF;;AAED,SAAS,YAAY,CAAC,WAAW,EAAE;AACjC,MAAI,IAAI,GAAG,WAtBL,QAAQ,EAsBM,WAAW,CAAC,CAAC;AACjC,MAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;;AAExB,MAAI,IAAI,EAAE;AACR,UAAM,mCAAmC,CAAC;GAC3C;;AAED,MAAI,CAAC,OAAO,GAAG,EAAE,CAAC;CACnB","file":"Service.js","sourcesContent":["import {funcMeta} from \"./utils\";\nimport {app} from \"./app\";\n\nexport function Service(name) {\n  if (typeof name === \"function\") {\n    let constructor = name; name = null;\n    return register(constructor);\n  }\n  return register;\n\n  function register(constructor){\n    registerLock(constructor);\n    let meta = funcMeta(constructor);\n\n    name = (name || meta.name);\n    meta.service.name = name;\n\n    app.service(name, constructor);\n  }\n}\n\nfunction registerLock(constructor) {\n  let meta = funcMeta(constructor);\n  var lock = meta.service;\n\n  if (lock) {\n    throw \"@Service() can only be used once!\";\n  }\n\n  meta.service = {};\n}\n"]}